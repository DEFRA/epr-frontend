{% extends 'layouts/page.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% block beforeContent %}
  {{ govukBackLink({
    text: localise("common:back"),
    href: backUrl
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <h1 class="govuk-heading-xl">{{ heading }}</h1>

      <div class="govuk-summary-card epr-waste-balance-banner govuk-!-margin-bottom-6">
        <div class="govuk-summary-card__title-wrapper govuk-!-padding-6">
          <div>
            <h2 class="govuk-summary-card__title" data-testid="waste-balance-amount">
              {{ wasteBalance.amount | formatTonnage }} {{ localise("registrations:wasteBalance.units") }}
            </h2>
            <p class="govuk-body-l govuk-!-margin-bottom-0 govuk-!-font-weight-bold">
              {{ wasteBalance.label }}
            </p>
          </div>
        </div>
        <div class="govuk-summary-card__content govuk-!-padding-4">
          <p class="govuk-body govuk-!-margin-bottom-0">
            {{ wasteBalance.hint }}
          </p>
        </div>
      </div>

      <p class="govuk-body">
        <a href="{{ createLink.href }}" class="govuk-link">{{ createLink.text }}</a>
      </p>

      <h2 class="govuk-heading-l">{{ selectHeading }}</h2>

      {{ govukInsetText({
        text: cancelHint
      }) }}

      {% if table.rows.length > 0 %}
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">{{ table.headings.recipient }}</th>
              <th scope="col" class="govuk-table__header">{{ table.headings.createdAt }}</th>
              <th scope="col" class="govuk-table__header">{{ table.headings.tonnage }}</th>
              <th scope="col" class="govuk-table__header">{{ table.headings.status }}</th>
              <th scope="col" class="govuk-table__header">{{ table.headings.action }}</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            {% for row in table.rows %}
              <tr class="govuk-table__row">
                <td class="govuk-table__cell">{{ row.recipient }}</td>
                <td class="govuk-table__cell">{{ row.createdAt }}</td>
                <td class="govuk-table__cell">{{ row.tonnage }}</td>
                <td class="govuk-table__cell">{{ row.status }}</td>
                <td class="govuk-table__cell">
                  <a href="{{ row.selectUrl }}" class="govuk-link">{{ selectText }}</a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="govuk-body">{{ localise("prns:list:noPrns") }}</p>
      {% endif %}

    </div>
  </div>
{% endblock %}
