{% extends 'layouts/page.njk' %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">{{ localise('summary-log:checkHeading') }}</h1>

    <p class="govuk-body">{{ localise('summary-log:checkIntro') }}</p>
    <p class="govuk-body">{{ localise('summary-log:checkIntro2') }}</p>

    {% if loads.added.total > 0 %}
    <h2 class="govuk-heading-l">{{ localise('summary-log:addedLoadsHeading', { count: loads.added.total }) }}</h2>
    {% else %}
    <h2 class="govuk-heading-l">{{ localise('summary-log:noAddedLoadsHeading') }}</h2>
    {% endif %}

    {% if loads.added.total > 0 %}
    <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-added-loads">
      {% if loads.added.validCount > 0 %}
      <div class="govuk-accordion__section">
        <div class="govuk-accordion__section-header">
          <h3 class="govuk-accordion__section-heading">
            <span class="govuk-accordion__section-button" id="accordion-added-loads-heading-valid">
              {{ localise('summary-log:loadsAdded', { count: loads.added.validCount }) }}
            </span>
          </h3>
          <div class="govuk-accordion__section-summary govuk-body">
            {{ localise('summary-log:loadsAddedExplanation') }}
          </div>
        </div>
        <div id="accordion-added-loads-content-valid" class="govuk-accordion__section-content">
          <p class="govuk-body">{{ localise('summary-log:rowIdExplanation') }}</p>
          <ul class="govuk-list govuk-list--bullet">
            {% for rowId in loads.added.valid %}
            <li>{{ rowId }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}

      {% if loads.added.invalidCount > 0 %}
      <div class="govuk-accordion__section">
        <div class="govuk-accordion__section-header">
          <h3 class="govuk-accordion__section-heading">
            <span class="govuk-accordion__section-button" id="accordion-added-loads-heading-invalid">
              {{ localise('summary-log:loadsNotAdded', { count: loads.added.invalidCount }) }}
            </span>
          </h3>
          <div class="govuk-accordion__section-summary govuk-body">
            {{ localise('summary-log:loadsNotAddedExplanation') }}
          </div>
        </div>
        <div id="accordion-added-loads-content-invalid" class="govuk-accordion__section-content">
          <p class="govuk-body">{{ localise('summary-log:rowIdExplanation') }}</p>
          <ul class="govuk-list govuk-list--bullet">
            {% for rowId in loads.added.invalid %}
            <li>{{ rowId }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      {% endif %}
    </div>
    {% endif %}

    {% if loads.adjusted.total > 0 %}
    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

    <h2 class="govuk-heading-l">{{ localise('summary-log:adjustedLoadsHeading', { count: loads.adjusted.total }) }}</h2>

    <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-adjusted-loads">
      <div class="govuk-accordion__section">
        <div class="govuk-accordion__section-header">
          <h3 class="govuk-accordion__section-heading">
            <span class="govuk-accordion__section-button" id="accordion-adjusted-loads-heading-1">
              {{ localise('summary-log:adjustmentsReflected') }}
            </span>
          </h3>
          <div class="govuk-accordion__section-summary govuk-body">
            {{ localise('summary-log:loadsAdjustedExplanation') }}
          </div>
        </div>
        <div id="accordion-adjusted-loads-content-1" class="govuk-accordion__section-content">
          <p class="govuk-body">{{ localise('summary-log:rowIdExplanation') }}</p>
          <ul class="govuk-list govuk-list--bullet">
            {% for rowId in loads.adjusted.valid %}
            <li>{{ rowId }}</li>
            {% endfor %}
            {% for rowId in loads.adjusted.invalid %}
            <li>{{ rowId }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
    {% endif %}

    <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

    <h2 class="govuk-heading-l">{{ localise('summary-log:complianceHeading') }}</h2>
    <h3 class="govuk-heading-s">{{ localise('summary-log:complianceSubheading') }}</h3>
    <p class="govuk-body">{{ localise('summary-log:complianceBody') }}</p>

    <h2 class="govuk-heading-m">{{ localise('summary-log:declarationHeading') }}</h2>
    <p class="govuk-body">{{ localise('summary-log:declarationIntro') }}</p>
    <ul class="govuk-list govuk-list--bullet">
      <li>{{ localise('summary-log:declarationBullet1') }}</li>
      <li>{{ localise('summary-log:declarationBullet2') }}</li>
    </ul>

    <form method="POST" action="/organisations/{{ organisationId }}/registrations/{{ registrationId }}/summary-logs/{{ summaryLogId }}/submit">
      <button type="submit" class="govuk-button" data-module="govuk-button">
        {{ localise('summary-log:confirmButton') }}
      </button>
    </form>

    <p class="govuk-body">
      <a href="/organisations/{{ organisationId }}/registrations/{{ registrationId }}/summary-logs/upload" class="govuk-link">{{ localise('summary-log:reuploadButton') }}</a>
    </p>
  </div>
</div>
{% endblock %}
